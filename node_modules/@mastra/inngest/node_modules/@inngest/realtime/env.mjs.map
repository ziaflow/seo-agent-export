{"version":3,"file":"env.mjs","names":["env: ExpectedEnv | undefined"],"sources":["../src/env.ts"],"sourcesContent":["export type EnvValue = string | undefined;\nexport type Env = Record<string, EnvValue>;\n\nexport type ExpectedEnv = {\n  INNGEST_DEV: string | undefined;\n  NODE_ENV: string | undefined;\n  INNGEST_BASE_URL: string | undefined;\n  INNGEST_API_BASE_URL: string | undefined;\n  INNGEST_SIGNING_KEY: string | undefined;\n  INNGEST_SIGNING_KEY_FALLBACK: string | undefined;\n};\n\n/**\n * The environment variables that we wish to access in the environment.\n *\n * Due to the way that some environment variables are exposed across different\n * runtimes and bundling tools, we need to be careful about how we access them.\n *\n * The most basic annoyance is that environment variables are exposed in\n * different locations (e.g. `process.env`, `Deno.env`, `Netlify.env`,\n * `import.meta.env`).\n *\n * Bundling can be more disruptive though, where some will literally\n * find/replace `process.env.MY_VAR` with the value of `MY_VAR` at build time,\n * which requires us to ensure that the full env var is used in code instead of\n * dynamically building it.\n */\nconst env: ExpectedEnv | undefined = (() => {\n  // Pure vite\n  try {\n    // @ts-expect-error - import.meta only available in some environments\n    const viteEnv = import.meta.env;\n\n    if (viteEnv) {\n      return {\n        INNGEST_DEV: viteEnv.INNGEST_DEV ?? viteEnv.VITE_INNGEST_DEV,\n        NODE_ENV: viteEnv.NODE_ENV,\n        INNGEST_BASE_URL:\n          viteEnv.INNGEST_BASE_URL ?? viteEnv.VITE_INNGEST_BASE_URL,\n        INNGEST_API_BASE_URL:\n          viteEnv.INNGEST_API_BASE_URL ?? viteEnv.VITE_INNGEST_API_BASE_URL,\n        INNGEST_SIGNING_KEY: viteEnv.INNGEST_SIGNING_KEY,\n        INNGEST_SIGNING_KEY_FALLBACK: viteEnv.INNGEST_SIGNING_KEY_FALLBACK,\n      };\n    }\n  } catch {\n    // noop\n  }\n\n  try {\n    // Node-like environments (sometimes polyfilled Vite)\n    if (process.env) {\n      return {\n        INNGEST_DEV:\n          process.env.INNGEST_DEV ??\n          process.env.NEXT_PUBLIC_INNGEST_DEV ??\n          process.env.REACT_APP_INNGEST_DEV ??\n          process.env.NUXT_PUBLIC_INNGEST_DEV ??\n          process.env.VUE_APP_INNGEST_DEV ??\n          process.env.VITE_INNGEST_DEV,\n\n        NODE_ENV:\n          process.env.NODE_ENV ??\n          process.env.NEXT_PUBLIC_NODE_ENV ??\n          process.env.REACT_APP_NODE_ENV ??\n          process.env.NUXT_PUBLIC_NODE_ENV ??\n          process.env.VUE_APP_NODE_ENV ??\n          process.env.VITE_NODE_ENV ??\n          process.env.VITE_MODE,\n\n        INNGEST_BASE_URL:\n          process.env.INNGEST_BASE_URL ??\n          process.env.NEXT_PUBLIC_INNGEST_BASE_URL ??\n          process.env.REACT_APP_INNGEST_BASE_URL ??\n          process.env.NUXT_PUBLIC_INNGEST_BASE_URL ??\n          process.env.VUE_APP_INNGEST_BASE_URL ??\n          process.env.VITE_INNGEST_BASE_URL,\n\n        INNGEST_API_BASE_URL:\n          process.env.INNGEST_API_BASE_URL ??\n          process.env.NEXT_PUBLIC_INNGEST_API_BASE_URL ??\n          process.env.REACT_APP_INNGEST_API_BASE_URL ??\n          process.env.NUXT_PUBLIC_INNGEST_API_BASE_URL ??\n          process.env.VUE_APP_INNGEST_API_BASE_URL ??\n          process.env.VITE_INNGEST_API_BASE_URL,\n\n        INNGEST_SIGNING_KEY: process.env.INNGEST_SIGNING_KEY,\n\n        INNGEST_SIGNING_KEY_FALLBACK: process.env.INNGEST_SIGNING_KEY_FALLBACK,\n      };\n    }\n  } catch {\n    // noop\n  }\n\n  // Deno\n  try {\n    const denoEnv = Deno.env.toObject();\n\n    if (denoEnv) {\n      return {\n        INNGEST_DEV: denoEnv.INNGEST_DEV,\n        NODE_ENV: denoEnv.NODE_ENV,\n        INNGEST_BASE_URL: denoEnv.INNGEST_BASE_URL,\n        INNGEST_API_BASE_URL: denoEnv.INNGEST_API_BASE_URL,\n        INNGEST_SIGNING_KEY: denoEnv.INNGEST_SIGNING_KEY,\n        INNGEST_SIGNING_KEY_FALLBACK: denoEnv.INNGEST_SIGNING_KEY_FALLBACK,\n      };\n    }\n  } catch {\n    // noop\n  }\n\n  // Netlify\n  try {\n    const netlifyEnv = Netlify.env.toObject();\n\n    if (netlifyEnv) {\n      return {\n        INNGEST_DEV: netlifyEnv.INNGEST_DEV,\n        NODE_ENV: netlifyEnv.NODE_ENV,\n        INNGEST_BASE_URL: netlifyEnv.INNGEST_BASE_URL,\n        INNGEST_API_BASE_URL: netlifyEnv.INNGEST_API_BASE_URL,\n        INNGEST_SIGNING_KEY: netlifyEnv.INNGEST_SIGNING_KEY,\n        INNGEST_SIGNING_KEY_FALLBACK: netlifyEnv.INNGEST_SIGNING_KEY_FALLBACK,\n      };\n    }\n  } catch {\n    // noop\n  }\n})();\n\n/**\n * The Deno environment, which is not always available.\n */\ndeclare const Deno: {\n  env: { toObject: () => Env };\n};\n\n/**\n * The Netlify environment, which is not always available.\n */\ndeclare const Netlify: {\n  env: { toObject: () => Env };\n};\n\n/**\n * Given a `key`, get the environment variable under that key.\n */\nexport const getEnvVar = (key: keyof ExpectedEnv): string | undefined => {\n  return env?.[key];\n};\n"],"mappings":";;;;;;;;;;;;;;;;AA2BA,MAAMA,aAAsC;AAE1C,KAAI;EAEF,MAAM,UAAU,OAAO,KAAK;AAE5B,MAAI,QACF,QAAO;GACL,aAAa,QAAQ,eAAe,QAAQ;GAC5C,UAAU,QAAQ;GAClB,kBACE,QAAQ,oBAAoB,QAAQ;GACtC,sBACE,QAAQ,wBAAwB,QAAQ;GAC1C,qBAAqB,QAAQ;GAC7B,8BAA8B,QAAQ;GACvC;SAEG;AAIR,KAAI;AAEF,MAAI,QAAQ,IACV,QAAO;GACL,aACE,QAAQ,IAAI,eACZ,QAAQ,IAAI,2BACZ,QAAQ,IAAI,yBACZ,QAAQ,IAAI,2BACZ,QAAQ,IAAI,uBACZ,QAAQ,IAAI;GAEd,UACE,QAAQ,IAAI,YACZ,QAAQ,IAAI,wBACZ,QAAQ,IAAI,sBACZ,QAAQ,IAAI,wBACZ,QAAQ,IAAI,oBACZ,QAAQ,IAAI,iBACZ,QAAQ,IAAI;GAEd,kBACE,QAAQ,IAAI,oBACZ,QAAQ,IAAI,gCACZ,QAAQ,IAAI,8BACZ,QAAQ,IAAI,gCACZ,QAAQ,IAAI,4BACZ,QAAQ,IAAI;GAEd,sBACE,QAAQ,IAAI,wBACZ,QAAQ,IAAI,oCACZ,QAAQ,IAAI,kCACZ,QAAQ,IAAI,oCACZ,QAAQ,IAAI,gCACZ,QAAQ,IAAI;GAEd,qBAAqB,QAAQ,IAAI;GAEjC,8BAA8B,QAAQ,IAAI;GAC3C;SAEG;AAKR,KAAI;EACF,MAAM,UAAU,KAAK,IAAI,UAAU;AAEnC,MAAI,QACF,QAAO;GACL,aAAa,QAAQ;GACrB,UAAU,QAAQ;GAClB,kBAAkB,QAAQ;GAC1B,sBAAsB,QAAQ;GAC9B,qBAAqB,QAAQ;GAC7B,8BAA8B,QAAQ;GACvC;SAEG;AAKR,KAAI;EACF,MAAM,aAAa,QAAQ,IAAI,UAAU;AAEzC,MAAI,WACF,QAAO;GACL,aAAa,WAAW;GACxB,UAAU,WAAW;GACrB,kBAAkB,WAAW;GAC7B,sBAAsB,WAAW;GACjC,qBAAqB,WAAW;GAChC,8BAA8B,WAAW;GAC1C;SAEG;IAGN;;;;AAmBJ,MAAa,aAAa,QAA+C;AACvE,QAAO,MAAM"}