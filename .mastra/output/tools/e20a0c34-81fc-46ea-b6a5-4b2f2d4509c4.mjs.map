{"version":3,"file":"e20a0c34-81fc-46ea-b6a5-4b2f2d4509c4.mjs","sources":["../../../src/mastra/tools/seoAnalysisTool.ts"],"sourcesContent":["import { createTool } from \"@mastra/core/tools\";\nimport { z } from \"zod\";\n\n/**\n * SEO Analysis Tool\n * Evaluates on-page, technical, and structural SEO issues\n */\nexport const seoAnalysisTool = createTool({\n  id: \"seo-analysis\",\n  description:\n    \"Analyzes website for on-page SEO, technical SEO issues, and site structure problems\",\n  inputSchema: z.object({\n    websiteUrl: z.string().describe(\"The URL of the website to analyze\"),\n    analysisType: z\n      .enum([\"on-page\", \"technical\", \"structure\", \"all\"])\n      .describe(\"Type of SEO analysis to perform\"),\n  }),\n  outputSchema: z.object({\n    analysisType: z.string(),\n    issues: z.array(\n      z.object({\n        category: z.string(),\n        severity: z.enum([\"critical\", \"high\", \"medium\", \"low\"]),\n        issue: z.string(),\n        recommendation: z.string(),\n      })\n    ),\n    score: z.number().min(0).max(100),\n    summary: z.string(),\n  }),\n  execute: async ({ context, mastra }) => {\n    const logger = mastra?.getLogger();\n    logger?.info(\"üîç [SEO Analysis] Starting analysis\", {\n      url: context.websiteUrl,\n      type: context.analysisType,\n    });\n\n    const issues: Array<{\n      category: string;\n      severity: \"critical\" | \"high\" | \"medium\" | \"low\";\n      issue: string;\n      recommendation: string;\n    }> = [];\n\n    // Simulate SEO analysis based on type\n    if (\n      context.analysisType === \"on-page\" ||\n      context.analysisType === \"all\"\n    ) {\n      logger?.info(\"üìÑ [SEO Analysis] Analyzing on-page elements\");\n      issues.push(\n        {\n          category: \"Meta Tags\",\n          severity: \"high\" as const,\n          issue: \"Missing meta description on homepage\",\n          recommendation:\n            \"Add a compelling meta description (120-160 characters)\",\n        },\n        {\n          category: \"Headings\",\n          severity: \"medium\" as const,\n          issue: \"Multiple H1 tags found on page\",\n          recommendation: \"Use only one H1 tag per page for optimal SEO\",\n        }\n      );\n    }\n\n    if (\n      context.analysisType === \"technical\" ||\n      context.analysisType === \"all\"\n    ) {\n      logger?.info(\"‚öôÔ∏è [SEO Analysis] Analyzing technical SEO\");\n      issues.push(\n        {\n          category: \"Core Web Vitals\",\n          severity: \"critical\" as const,\n          issue: \"Largest Contentful Paint (LCP) exceeds 4 seconds\",\n          recommendation:\n            \"Optimize image sizes, implement lazy loading, and reduce server response time\",\n        },\n        {\n          category: \"Mobile Friendliness\",\n          severity: \"high\" as const,\n          issue: \"Viewport meta tag not configured properly\",\n          recommendation:\n            \"Add proper viewport configuration for mobile devices\",\n        }\n      );\n    }\n\n    if (\n      context.analysisType === \"structure\" ||\n      context.analysisType === \"all\"\n    ) {\n      logger?.info(\"üèóÔ∏è [SEO Analysis] Analyzing site structure\");\n      issues.push(\n        {\n          category: \"URL Structure\",\n          severity: \"medium\" as const,\n          issue: \"URLs contain unnecessary parameters and special characters\",\n          recommendation:\n            \"Use clean, descriptive URLs with hyphens instead of underscores\",\n        },\n        {\n          category: \"Internal Linking\",\n          severity: \"medium\" as const,\n          issue: \"Some pages have no internal links\",\n          recommendation:\n            \"Establish clear internal linking strategy for content discovery\",\n        }\n      );\n    }\n\n    const score = Math.max(40, 100 - issues.length * 8);\n    logger?.info(\"‚úÖ [SEO Analysis] Analysis complete\", { score });\n\n    return {\n      analysisType: context.analysisType,\n      issues,\n      score,\n      summary: `Found ${issues.length} SEO issues. Overall SEO score: ${score}/100`,\n    };\n  },\n});\n"],"names":[],"mappings":";;;AAOO,MAAM,kBAAkB,UAAA,CAAW;AAAA,EACxC,EAAA,EAAI,cAAA;AAAA,EACJ,WAAA,EACE,qFAAA;AAAA,EACF,WAAA,EAAa,EAAE,MAAA,CAAO;AAAA,IACpB,UAAA,EAAY,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,mCAAmC,CAAA;AAAA,IACnE,YAAA,EAAc,CAAA,CACX,IAAA,CAAK,CAAC,SAAA,EAAW,WAAA,EAAa,WAAA,EAAa,KAAK,CAAC,CAAA,CACjD,QAAA,CAAS,iCAAiC;AAAA,GAC9C,CAAA;AAAA,EACD,YAAA,EAAc,EAAE,MAAA,CAAO;AAAA,IACrB,YAAA,EAAc,EAAE,MAAA,EAAO;AAAA,IACvB,QAAQ,CAAA,CAAE,KAAA;AAAA,MACR,EAAE,MAAA,CAAO;AAAA,QACP,QAAA,EAAU,EAAE,MAAA,EAAO;AAAA,QACnB,QAAA,EAAU,EAAE,IAAA,CAAK,CAAC,YAAY,MAAA,EAAQ,QAAA,EAAU,KAAK,CAAC,CAAA;AAAA,QACtD,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,QAChB,cAAA,EAAgB,EAAE,MAAA;AAAO,OAC1B;AAAA,KACH;AAAA,IACA,KAAA,EAAO,EAAE,MAAA,EAAO,CAAE,IAAI,CAAC,CAAA,CAAE,IAAI,GAAG,CAAA;AAAA,IAChC,OAAA,EAAS,EAAE,MAAA;AAAO,GACnB,CAAA;AAAA,EACD,OAAA,EAAS,OAAO,EAAE,OAAA,EAAS,QAAO,KAAM;AACtC,IAAA,MAAM,MAAA,GAAS,QAAQ,SAAA,EAAU;AACjC,IAAA,MAAA,EAAQ,KAAK,4CAAA,EAAuC;AAAA,MAClD,KAAK,OAAA,CAAQ,UAAA;AAAA,MACb,MAAM,OAAA,CAAQ;AAAA,KACf,CAAA;AAED,IAAA,MAAM,SAKD,EAAC;AAGN,IAAA,IACE,OAAA,CAAQ,YAAA,KAAiB,SAAA,IACzB,OAAA,CAAQ,iBAAiB,KAAA,EACzB;AACA,MAAA,MAAA,EAAQ,KAAK,qDAA8C,CAAA;AAC3D,MAAA,MAAA,CAAO,IAAA;AAAA,QACL;AAAA,UACE,QAAA,EAAU,WAAA;AAAA,UACV,QAAA,EAAU,MAAA;AAAA,UACV,KAAA,EAAO,sCAAA;AAAA,UACP,cAAA,EACE;AAAA,SACJ;AAAA,QACA;AAAA,UACE,QAAA,EAAU,UAAA;AAAA,UACV,QAAA,EAAU,QAAA;AAAA,UACV,KAAA,EAAO,gCAAA;AAAA,UACP,cAAA,EAAgB;AAAA;AAClB,OACF;AAAA,IACF;AAEA,IAAA,IACE,OAAA,CAAQ,YAAA,KAAiB,WAAA,IACzB,OAAA,CAAQ,iBAAiB,KAAA,EACzB;AACA,MAAA,MAAA,EAAQ,KAAK,qDAA2C,CAAA;AACxD,MAAA,MAAA,CAAO,IAAA;AAAA,QACL;AAAA,UACE,QAAA,EAAU,iBAAA;AAAA,UACV,QAAA,EAAU,UAAA;AAAA,UACV,KAAA,EAAO,kDAAA;AAAA,UACP,cAAA,EACE;AAAA,SACJ;AAAA,QACA;AAAA,UACE,QAAA,EAAU,qBAAA;AAAA,UACV,QAAA,EAAU,MAAA;AAAA,UACV,KAAA,EAAO,2CAAA;AAAA,UACP,cAAA,EACE;AAAA;AACJ,OACF;AAAA,IACF;AAEA,IAAA,IACE,OAAA,CAAQ,YAAA,KAAiB,WAAA,IACzB,OAAA,CAAQ,iBAAiB,KAAA,EACzB;AACA,MAAA,MAAA,EAAQ,KAAK,yDAA6C,CAAA;AAC1D,MAAA,MAAA,CAAO,IAAA;AAAA,QACL;AAAA,UACE,QAAA,EAAU,eAAA;AAAA,UACV,QAAA,EAAU,QAAA;AAAA,UACV,KAAA,EAAO,4DAAA;AAAA,UACP,cAAA,EACE;AAAA,SACJ;AAAA,QACA;AAAA,UACE,QAAA,EAAU,kBAAA;AAAA,UACV,QAAA,EAAU,QAAA;AAAA,UACV,KAAA,EAAO,mCAAA;AAAA,UACP,cAAA,EACE;AAAA;AACJ,OACF;AAAA,IACF;AAEA,IAAA,MAAM,QAAQ,IAAA,CAAK,GAAA,CAAI,IAAI,GAAA,GAAM,MAAA,CAAO,SAAS,CAAC,CAAA;AAClD,IAAA,MAAA,EAAQ,IAAA,CAAK,yCAAA,EAAsC,EAAE,KAAA,EAAO,CAAA;AAE5D,IAAA,OAAO;AAAA,MACL,cAAc,OAAA,CAAQ,YAAA;AAAA,MACtB,MAAA;AAAA,MACA,KAAA;AAAA,MACA,OAAA,EAAS,CAAA,MAAA,EAAS,MAAA,CAAO,MAAM,mCAAmC,KAAK,CAAA,IAAA;AAAA,KACzE;AAAA,EACF;AACF,CAAC;;;;"}