{"version":3,"file":"92aa7218-c39f-472c-aac3-204ce48ad95f.mjs","sources":["../../../src/mastra/tools/searchQueryTool.ts"],"sourcesContent":["import { createTool } from \"@mastra/core/tools\";\nimport { z } from \"zod\";\n\n/**\n * Search Query Analysis Tool\n * Identifies content opportunities and keyword gaps from search data\n */\nexport const searchQueryTool = createTool({\n  id: \"search-query-analysis\",\n  description:\n    \"Analyzes search queries to identify content opportunities, keyword gaps, and trending topics\",\n  inputSchema: z.object({\n    industry: z.string().describe(\"Industry or niche for keyword research\"),\n    analysisScope: z\n      .enum([\"opportunities\", \"gaps\", \"trending\", \"all\"])\n      .describe(\"Scope of search query analysis\"),\n  }),\n  outputSchema: z.object({\n    analysisScope: z.string(),\n    keywords: z.array(\n      z.object({\n        keyword: z.string(),\n        searchVolume: z.number(),\n        difficulty: z.number(),\n        intent: z.enum([\"informational\", \"navigational\", \"commercial\", \"transactional\"]),\n        opportunity: z.string(),\n      })\n    ),\n    contentGaps: z.array(z.string()),\n    trendingTopics: z.array(\n      z.object({\n        topic: z.string(),\n        trend: z.string(),\n      })\n    ),\n  }),\n  execute: async ({ context, mastra }) => {\n    const logger = mastra?.getLogger();\n    logger?.info(\"üîé [Search Query] Starting analysis\", {\n      industry: context.industry,\n      scope: context.analysisScope,\n    });\n\n    const keywords: Array<{\n      keyword: string;\n      searchVolume: number;\n      difficulty: number;\n      intent: \"informational\" | \"navigational\" | \"commercial\" | \"transactional\";\n      opportunity: string;\n    }> = [];\n    const contentGaps: string[] = [];\n    const trendingTopics: Array<{\n      topic: string;\n      trend: string;\n    }> = [];\n\n    // Simulate search query analysis\n    if (context.analysisScope === \"opportunities\" || context.analysisScope === \"all\") {\n      logger?.info(\"üí° [Search Query] Finding keyword opportunities\");\n      keywords.push(\n        {\n          keyword: `${context.industry} best practices`,\n          searchVolume: 1200,\n          difficulty: 35,\n          intent: \"informational\" as const,\n          opportunity: \"High volume, achievable ranking potential\",\n        },\n        {\n          keyword: `${context.industry} comparison`,\n          searchVolume: 850,\n          difficulty: 42,\n          intent: \"commercial\" as const,\n          opportunity: \"Purchase intent keywords with moderate difficulty\",\n        }\n      );\n    }\n\n    if (context.analysisScope === \"gaps\" || context.analysisScope === \"all\") {\n      logger?.info(\"‚ö†Ô∏è [Search Query] Identifying content gaps\");\n      contentGaps.push(\n        `\"${context.industry} implementation guide\" - No existing content`,\n        `\"${context.industry} cost analysis\" - Outdated content only`,\n        `\"${context.industry} ROI calculator\" - Missing interactive tools`\n      );\n    }\n\n    if (context.analysisScope === \"trending\" || context.analysisScope === \"all\") {\n      logger?.info(\"üìà [Search Query] Analyzing trending topics\");\n      trendingTopics.push(\n        { topic: `${context.industry} automation`, trend: \"up 45%\" },\n        { topic: `${context.industry} AI integration`, trend: \"up 78%\" },\n        { topic: `${context.industry} 2024 trends`, trend: \"up 62%\" }\n      );\n    }\n\n    logger?.info(\"‚úÖ [Search Query] Analysis complete\");\n\n    return {\n      analysisScope: context.analysisScope,\n      keywords,\n      contentGaps,\n      trendingTopics,\n    };\n  },\n});\n"],"names":[],"mappings":";;;AAOO,MAAM,kBAAkB,UAAA,CAAW;AAAA,EACxC,EAAA,EAAI,uBAAA;AAAA,EACJ,WAAA,EACE,8FAAA;AAAA,EACF,WAAA,EAAa,EAAE,MAAA,CAAO;AAAA,IACpB,QAAA,EAAU,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,wCAAwC,CAAA;AAAA,IACtE,aAAA,EAAe,CAAA,CACZ,IAAA,CAAK,CAAC,eAAA,EAAiB,MAAA,EAAQ,UAAA,EAAY,KAAK,CAAC,CAAA,CACjD,QAAA,CAAS,gCAAgC;AAAA,GAC7C,CAAA;AAAA,EACD,YAAA,EAAc,EAAE,MAAA,CAAO;AAAA,IACrB,aAAA,EAAe,EAAE,MAAA,EAAO;AAAA,IACxB,UAAU,CAAA,CAAE,KAAA;AAAA,MACV,EAAE,MAAA,CAAO;AAAA,QACP,OAAA,EAAS,EAAE,MAAA,EAAO;AAAA,QAClB,YAAA,EAAc,EAAE,MAAA,EAAO;AAAA,QACvB,UAAA,EAAY,EAAE,MAAA,EAAO;AAAA,QACrB,MAAA,EAAQ,EAAE,IAAA,CAAK,CAAC,iBAAiB,cAAA,EAAgB,YAAA,EAAc,eAAe,CAAC,CAAA;AAAA,QAC/E,WAAA,EAAa,EAAE,MAAA;AAAO,OACvB;AAAA,KACH;AAAA,IACA,WAAA,EAAa,CAAA,CAAE,KAAA,CAAM,CAAA,CAAE,QAAQ,CAAA;AAAA,IAC/B,gBAAgB,CAAA,CAAE,KAAA;AAAA,MAChB,EAAE,MAAA,CAAO;AAAA,QACP,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,QAChB,KAAA,EAAO,EAAE,MAAA;AAAO,OACjB;AAAA;AACH,GACD,CAAA;AAAA,EACD,OAAA,EAAS,OAAO,EAAE,OAAA,EAAS,QAAO,KAAM;AACtC,IAAA,MAAM,MAAA,GAAS,QAAQ,SAAA,EAAU;AACjC,IAAA,MAAA,EAAQ,KAAK,4CAAA,EAAuC;AAAA,MAClD,UAAU,OAAA,CAAQ,QAAA;AAAA,MAClB,OAAO,OAAA,CAAQ;AAAA,KAChB,CAAA;AAED,IAAA,MAAM,WAMD,EAAC;AACN,IAAA,MAAM,cAAwB,EAAC;AAC/B,IAAA,MAAM,iBAGD,EAAC;AAGN,IAAA,IAAI,OAAA,CAAQ,aAAA,KAAkB,eAAA,IAAmB,OAAA,CAAQ,kBAAkB,KAAA,EAAO;AAChF,MAAA,MAAA,EAAQ,KAAK,wDAAiD,CAAA;AAC9D,MAAA,QAAA,CAAS,IAAA;AAAA,QACP;AAAA,UACE,OAAA,EAAS,CAAA,EAAG,OAAA,CAAQ,QAAQ,CAAA,eAAA,CAAA;AAAA,UAC5B,YAAA,EAAc,IAAA;AAAA,UACd,UAAA,EAAY,EAAA;AAAA,UACZ,MAAA,EAAQ,eAAA;AAAA,UACR,WAAA,EAAa;AAAA,SACf;AAAA,QACA;AAAA,UACE,OAAA,EAAS,CAAA,EAAG,OAAA,CAAQ,QAAQ,CAAA,WAAA,CAAA;AAAA,UAC5B,YAAA,EAAc,GAAA;AAAA,UACd,UAAA,EAAY,EAAA;AAAA,UACZ,MAAA,EAAQ,YAAA;AAAA,UACR,WAAA,EAAa;AAAA;AACf,OACF;AAAA,IACF;AAEA,IAAA,IAAI,OAAA,CAAQ,aAAA,KAAkB,MAAA,IAAU,OAAA,CAAQ,kBAAkB,KAAA,EAAO;AACvE,MAAA,MAAA,EAAQ,KAAK,sDAA4C,CAAA;AACzD,MAAA,WAAA,CAAY,IAAA;AAAA,QACV,CAAA,CAAA,EAAI,QAAQ,QAAQ,CAAA,4CAAA,CAAA;AAAA,QACpB,CAAA,CAAA,EAAI,QAAQ,QAAQ,CAAA,uCAAA,CAAA;AAAA,QACpB,CAAA,CAAA,EAAI,QAAQ,QAAQ,CAAA,4CAAA;AAAA,OACtB;AAAA,IACF;AAEA,IAAA,IAAI,OAAA,CAAQ,aAAA,KAAkB,UAAA,IAAc,OAAA,CAAQ,kBAAkB,KAAA,EAAO;AAC3E,MAAA,MAAA,EAAQ,KAAK,oDAA6C,CAAA;AAC1D,MAAA,cAAA,CAAe,IAAA;AAAA,QACb,EAAE,KAAA,EAAO,CAAA,EAAG,QAAQ,QAAQ,CAAA,WAAA,CAAA,EAAe,OAAO,QAAA,EAAS;AAAA,QAC3D,EAAE,KAAA,EAAO,CAAA,EAAG,QAAQ,QAAQ,CAAA,eAAA,CAAA,EAAmB,OAAO,QAAA,EAAS;AAAA,QAC/D,EAAE,KAAA,EAAO,CAAA,EAAG,QAAQ,QAAQ,CAAA,YAAA,CAAA,EAAgB,OAAO,QAAA;AAAS,OAC9D;AAAA,IACF;AAEA,IAAA,MAAA,EAAQ,KAAK,yCAAoC,CAAA;AAEjD,IAAA,OAAO;AAAA,MACL,eAAe,OAAA,CAAQ,aAAA;AAAA,MACvB,QAAA;AAAA,MACA,WAAA;AAAA,MACA;AAAA,KACF;AAAA,EACF;AACF,CAAC;;;;"}