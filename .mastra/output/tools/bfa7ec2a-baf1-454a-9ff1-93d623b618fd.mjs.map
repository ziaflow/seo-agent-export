{"version":3,"file":"bfa7ec2a-baf1-454a-9ff1-93d623b618fd.mjs","sources":["../../../src/mastra/tools/keywordRadarTool.ts"],"sourcesContent":["import { createTool } from \"@mastra/core/tools\";\r\nimport { z } from \"zod\";\r\nimport { storeKeywordRadarInsights } from \"../storage/analyticsDb\";\r\n\r\n/**\r\n * Keyword Radar Tool\r\n * Aggregates keyword intel, trends, and opportunity scores.\r\n */\r\nexport const keywordRadarTool = createTool({\r\n  id: \"keyword-radar\",\r\n  description:\r\n    \"Analyzes industry keywords, calculates opportunity scores, and highlights trending topics.\",\r\n  inputSchema: z.object({\r\n    industry: z.string().describe(\"Industry or niche to analyze\"),\r\n    seedKeywords: z.array(z.string()).optional(),\r\n    geography: z.string().optional().describe(\"Geographic focus like US, EU, global\"),\r\n  }),\r\n  outputSchema: z.object({\r\n    industry: z.string(),\r\n    focusKeywords: z.array(\r\n      z.object({\r\n        keyword: z.string(),\r\n        searchVolume: z.number(),\r\n        difficulty: z.number(),\r\n        opportunityScore: z.number(),\r\n        intent: z.string(),\r\n      }),\r\n    ),\r\n    trendSignals: z.array(z.object({ topic: z.string(), delta: z.string() })),\r\n    generatedAt: z.string(),\r\n  }),\r\n  execute: async ({ context, mastra }) => {\r\n    const logger = mastra?.getLogger();\r\n    logger?.info(\"ðŸ“¡ [Keyword Radar] Running analysis\", {\r\n      industry: context.industry,\r\n      seeds: context.seedKeywords?.length ?? 0,\r\n    });\r\n\r\n    // Placeholder logic â€“ replace with real Search Console + SERP integrations.\r\n    const focusKeywords = [\r\n      {\r\n        keyword: `${context.industry} automation software`,\r\n        searchVolume: 5400,\r\n        difficulty: 38,\r\n        opportunityScore: 82,\r\n        intent: \"commercial\",\r\n      },\r\n      {\r\n        keyword: `${context.industry} best practices`,\r\n        searchVolume: 2900,\r\n        difficulty: 32,\r\n        opportunityScore: 77,\r\n        intent: \"informational\",\r\n      },\r\n      {\r\n        keyword: `${context.industry} pricing`,\r\n        searchVolume: 1800,\r\n        difficulty: 45,\r\n        opportunityScore: 68,\r\n        intent: \"transactional\",\r\n      },\r\n    ];\r\n\r\n    const trendSignals = [\r\n      { topic: `${context.industry} AI`, delta: \"up 65%\" },\r\n      { topic: `${context.industry} templates`, delta: \"up 41%\" },\r\n    ];\r\n\r\n    const payload = {\r\n      industry: context.industry,\r\n      focusKeywords,\r\n      trendSignals,\r\n      generatedAt: new Date().toISOString(),\r\n    };\r\n\r\n    await storeKeywordRadarInsights(payload);\r\n    logger?.info(\"âœ… [Keyword Radar] Insights stored\", {\r\n      keywordsTracked: focusKeywords.length,\r\n    });\r\n\r\n    return payload;\r\n  },\r\n});\r\n"],"names":[],"mappings":"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"}