{"version":3,"file":"ed5a645a-26a6-45ef-b9e8-5fdab2b2f64c.mjs","sources":["../../../src/mastra/tools/searchQueryTool.ts"],"sourcesContent":["import { createTool } from \"@mastra/core/tools\";\r\nimport { z } from \"zod\";\r\n\r\n/**\r\n * Search Query Analysis Tool\r\n * Identifies content opportunities and keyword gaps from search data\r\n */\r\nexport const searchQueryTool = createTool({\r\n  id: \"search-query-analysis\",\r\n  description:\r\n    \"Analyzes search queries to identify content opportunities, keyword gaps, and trending topics\",\r\n  inputSchema: z.object({\r\n    industry: z.string().describe(\"Industry or niche for keyword research\"),\r\n    analysisScope: z\r\n      .enum([\"opportunities\", \"gaps\", \"trending\", \"all\"])\r\n      .describe(\"Scope of search query analysis\"),\r\n  }),\r\n  outputSchema: z.object({\r\n    analysisScope: z.string(),\r\n    keywords: z.array(\r\n      z.object({\r\n        keyword: z.string(),\r\n        searchVolume: z.number(),\r\n        difficulty: z.number(),\r\n        intent: z.enum([\"informational\", \"navigational\", \"commercial\", \"transactional\"]),\r\n        opportunity: z.string(),\r\n      })\r\n    ),\r\n    contentGaps: z.array(z.string()),\r\n    trendingTopics: z.array(\r\n      z.object({\r\n        topic: z.string(),\r\n        trend: z.string(),\r\n      })\r\n    ),\r\n  }),\r\n  execute: async ({ context, mastra }) => {\r\n    const logger = mastra?.getLogger();\r\n    logger?.info(\"üîé [Search Query] Starting analysis\", {\r\n      industry: context.industry,\r\n      scope: context.analysisScope,\r\n    });\r\n\r\n    const keywords: Array<{\r\n      keyword: string;\r\n      searchVolume: number;\r\n      difficulty: number;\r\n      intent: \"informational\" | \"navigational\" | \"commercial\" | \"transactional\";\r\n      opportunity: string;\r\n    }> = [];\r\n    const contentGaps: string[] = [];\r\n    const trendingTopics: Array<{\r\n      topic: string;\r\n      trend: string;\r\n    }> = [];\r\n\r\n    // Simulate search query analysis\r\n    if (context.analysisScope === \"opportunities\" || context.analysisScope === \"all\") {\r\n      logger?.info(\"üí° [Search Query] Finding keyword opportunities\");\r\n      keywords.push(\r\n        {\r\n          keyword: `${context.industry} best practices`,\r\n          searchVolume: 1200,\r\n          difficulty: 35,\r\n          intent: \"informational\" as const,\r\n          opportunity: \"High volume, achievable ranking potential\",\r\n        },\r\n        {\r\n          keyword: `${context.industry} comparison`,\r\n          searchVolume: 850,\r\n          difficulty: 42,\r\n          intent: \"commercial\" as const,\r\n          opportunity: \"Purchase intent keywords with moderate difficulty\",\r\n        }\r\n      );\r\n    }\r\n\r\n    if (context.analysisScope === \"gaps\" || context.analysisScope === \"all\") {\r\n      logger?.info(\"‚ö†Ô∏è [Search Query] Identifying content gaps\");\r\n      contentGaps.push(\r\n        `\"${context.industry} implementation guide\" - No existing content`,\r\n        `\"${context.industry} cost analysis\" - Outdated content only`,\r\n        `\"${context.industry} ROI calculator\" - Missing interactive tools`\r\n      );\r\n    }\r\n\r\n    if (context.analysisScope === \"trending\" || context.analysisScope === \"all\") {\r\n      logger?.info(\"üìà [Search Query] Analyzing trending topics\");\r\n      trendingTopics.push(\r\n        { topic: `${context.industry} automation`, trend: \"up 45%\" },\r\n        { topic: `${context.industry} AI integration`, trend: \"up 78%\" },\r\n        { topic: `${context.industry} 2024 trends`, trend: \"up 62%\" }\r\n      );\r\n    }\r\n\r\n    logger?.info(\"‚úÖ [Search Query] Analysis complete\");\r\n\r\n    return {\r\n      analysisScope: context.analysisScope,\r\n      keywords,\r\n      contentGaps,\r\n      trendingTopics,\r\n    };\r\n  },\r\n});\r\n"],"names":[],"mappings":"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"}