{"version":3,"file":"feff3047-6da1-4e62-ba39-a4d730dbb501.mjs","sources":["../../../src/mastra/tools/analyticsTool.ts"],"sourcesContent":["import { createTool } from \"@mastra/core/tools\";\nimport { z } from \"zod\";\n\n/**\n * Analytics Data Tool\n * Fetches and analyzes marketing data from Google Analytics\n */\nexport const analyticsTool = createTool({\n  id: \"analytics-data\",\n  description:\n    \"Fetches and analyzes marketing analytics data including traffic, conversions, and user behavior\",\n  inputSchema: z.object({\n    metric: z\n      .enum([\"traffic\", \"conversions\", \"bounce-rate\", \"engagement\", \"all\"])\n      .describe(\"Analytics metric to retrieve\"),\n    timeRange: z\n      .enum([\"last-7-days\", \"last-30-days\", \"last-90-days\"])\n      .describe(\"Time range for data analysis\"),\n  }),\n  outputSchema: z.object({\n    metric: z.string(),\n    data: z.array(\n      z.object({\n        date: z.string(),\n        value: z.number(),\n        trend: z.string(),\n      })\n    ),\n    insights: z.array(z.string()),\n    recommendations: z.array(z.string()),\n  }),\n  execute: async ({ context, mastra }) => {\n    const logger = mastra?.getLogger();\n    logger?.info(\"ðŸ“Š [Analytics] Fetching data\", {\n      metric: context.metric,\n      timeRange: context.timeRange,\n    });\n\n    const data = [];\n    const insights = [];\n    const recommendations = [];\n\n    // Simulate analytics data retrieval\n    if (context.metric === \"traffic\" || context.metric === \"all\") {\n      logger?.info(\"ðŸ‘¥ [Analytics] Processing traffic data\");\n      data.push(\n        { date: \"2024-11-15\", value: 2500, trend: \"up\" },\n        { date: \"2024-11-16\", value: 2800, trend: \"up\" },\n        { date: \"2024-11-17\", value: 2100, trend: \"down\" }\n      );\n      insights.push(\n        \"Traffic increased 12% week-over-week\",\n        \"Mobile traffic represents 65% of total visits\"\n      );\n      recommendations.push(\n        \"Focus content optimization on mobile audience\",\n        \"Analyze referral sources driving highest traffic\"\n      );\n    }\n\n    if (context.metric === \"conversions\" || context.metric === \"all\") {\n      logger?.info(\"ðŸŽ¯ [Analytics] Processing conversion data\");\n      data.push(\n        { date: \"2024-11-15\", value: 45, trend: \"up\" },\n        { date: \"2024-11-16\", value: 52, trend: \"up\" },\n        { date: \"2024-11-17\", value: 38, trend: \"down\" }\n      );\n      insights.push(\"Conversion rate: 1.8%\", \"Average order value increased 8%\");\n      recommendations.push(\n        \"Optimize checkout process to reduce cart abandonment\",\n        \"Create targeted landing pages for high-intent keywords\"\n      );\n    }\n\n    if (context.metric === \"bounce-rate\" || context.metric === \"all\") {\n      logger?.info(\"ðŸ“‰ [Analytics] Processing bounce rate data\");\n      insights.push(\"Average bounce rate: 42%\", \"Blog posts have 35% bounce rate\");\n      recommendations.push(\n        \"Improve time-on-page for landing pages\",\n        \"Add related content suggestions to reduce bounces\"\n      );\n    }\n\n    if (\n      context.metric === \"engagement\" ||\n      context.metric === \"all\"\n    ) {\n      logger?.info(\"âš¡ [Analytics] Processing engagement data\");\n      insights.push(\n        \"Average session duration: 3m 24s\",\n        \"Pages per session: 3.2\"\n      );\n      recommendations.push(\n        \"Create more internal linking opportunities\",\n        \"Develop content series to increase pages per session\"\n      );\n    }\n\n    logger?.info(\"âœ… [Analytics] Data processing complete\");\n\n    return {\n      metric: context.metric,\n      data,\n      insights,\n      recommendations,\n    };\n  },\n});\n"],"names":[],"mappings":"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"}