{"version":3,"file":"e7271ec6-e634-4829-a039-45b9802c0ff0.mjs","sources":["../../../src/mastra/tools/analyticsTool.ts"],"sourcesContent":["import { createTool } from \"@mastra/core/tools\";\r\nimport { z } from \"zod\";\r\n\r\n/**\r\n * Analytics Data Tool\r\n * Fetches and analyzes marketing data from Google Analytics\r\n */\r\nexport const analyticsTool = createTool({\r\n  id: \"analytics-data\",\r\n  description:\r\n    \"Fetches and analyzes marketing analytics data including traffic, conversions, and user behavior\",\r\n  inputSchema: z.object({\r\n    metric: z\r\n      .enum([\"traffic\", \"conversions\", \"bounce-rate\", \"engagement\", \"all\"])\r\n      .describe(\"Analytics metric to retrieve\"),\r\n    timeRange: z\r\n      .enum([\"last-7-days\", \"last-30-days\", \"last-90-days\"])\r\n      .describe(\"Time range for data analysis\"),\r\n  }),\r\n  outputSchema: z.object({\r\n    metric: z.string(),\r\n    data: z.array(\r\n      z.object({\r\n        date: z.string(),\r\n        value: z.number(),\r\n        trend: z.string(),\r\n      })\r\n    ),\r\n    insights: z.array(z.string()),\r\n    recommendations: z.array(z.string()),\r\n  }),\r\n  execute: async ({ context, mastra }) => {\r\n    const logger = mastra?.getLogger();\r\n    logger?.info(\"ðŸ“Š [Analytics] Fetching data\", {\r\n      metric: context.metric,\r\n      timeRange: context.timeRange,\r\n    });\r\n\r\n    const data = [];\r\n    const insights = [];\r\n    const recommendations = [];\r\n\r\n    // Simulate analytics data retrieval\r\n    if (context.metric === \"traffic\" || context.metric === \"all\") {\r\n      logger?.info(\"ðŸ‘¥ [Analytics] Processing traffic data\");\r\n      data.push(\r\n        { date: \"2024-11-15\", value: 2500, trend: \"up\" },\r\n        { date: \"2024-11-16\", value: 2800, trend: \"up\" },\r\n        { date: \"2024-11-17\", value: 2100, trend: \"down\" }\r\n      );\r\n      insights.push(\r\n        \"Traffic increased 12% week-over-week\",\r\n        \"Mobile traffic represents 65% of total visits\"\r\n      );\r\n      recommendations.push(\r\n        \"Focus content optimization on mobile audience\",\r\n        \"Analyze referral sources driving highest traffic\"\r\n      );\r\n    }\r\n\r\n    if (context.metric === \"conversions\" || context.metric === \"all\") {\r\n      logger?.info(\"ðŸŽ¯ [Analytics] Processing conversion data\");\r\n      data.push(\r\n        { date: \"2024-11-15\", value: 45, trend: \"up\" },\r\n        { date: \"2024-11-16\", value: 52, trend: \"up\" },\r\n        { date: \"2024-11-17\", value: 38, trend: \"down\" }\r\n      );\r\n      insights.push(\"Conversion rate: 1.8%\", \"Average order value increased 8%\");\r\n      recommendations.push(\r\n        \"Optimize checkout process to reduce cart abandonment\",\r\n        \"Create targeted landing pages for high-intent keywords\"\r\n      );\r\n    }\r\n\r\n    if (context.metric === \"bounce-rate\" || context.metric === \"all\") {\r\n      logger?.info(\"ðŸ“‰ [Analytics] Processing bounce rate data\");\r\n      insights.push(\"Average bounce rate: 42%\", \"Blog posts have 35% bounce rate\");\r\n      recommendations.push(\r\n        \"Improve time-on-page for landing pages\",\r\n        \"Add related content suggestions to reduce bounces\"\r\n      );\r\n    }\r\n\r\n    if (\r\n      context.metric === \"engagement\" ||\r\n      context.metric === \"all\"\r\n    ) {\r\n      logger?.info(\"âš¡ [Analytics] Processing engagement data\");\r\n      insights.push(\r\n        \"Average session duration: 3m 24s\",\r\n        \"Pages per session: 3.2\"\r\n      );\r\n      recommendations.push(\r\n        \"Create more internal linking opportunities\",\r\n        \"Develop content series to increase pages per session\"\r\n      );\r\n    }\r\n\r\n    logger?.info(\"âœ… [Analytics] Data processing complete\");\r\n\r\n    return {\r\n      metric: context.metric,\r\n      data,\r\n      insights,\r\n      recommendations,\r\n    };\r\n  },\r\n});\r\n"],"names":[],"mappings":";;;AAOO,MAAM,gBAAgB,UAAA,CAAW;AAAA,EACtC,EAAA,EAAI,gBAAA;AAAA,EACJ,WAAA,EACE,iGAAA;AAAA,EACF,WAAA,EAAa,EAAE,MAAA,CAAO;AAAA,IACpB,MAAA,EAAQ,CAAA,CACL,IAAA,CAAK,CAAC,SAAA,EAAW,aAAA,EAAe,aAAA,EAAe,YAAA,EAAc,KAAK,CAAC,CAAA,CACnE,QAAA,CAAS,8BAA8B,CAAA;AAAA,IAC1C,SAAA,EAAW,CAAA,CACR,IAAA,CAAK,CAAC,aAAA,EAAe,gBAAgB,cAAc,CAAC,CAAA,CACpD,QAAA,CAAS,8BAA8B;AAAA,GAC3C,CAAA;AAAA,EACD,YAAA,EAAc,EAAE,MAAA,CAAO;AAAA,IACrB,MAAA,EAAQ,EAAE,MAAA,EAAO;AAAA,IACjB,MAAM,CAAA,CAAE,KAAA;AAAA,MACN,EAAE,MAAA,CAAO;AAAA,QACP,IAAA,EAAM,EAAE,MAAA,EAAO;AAAA,QACf,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,QAChB,KAAA,EAAO,EAAE,MAAA;AAAO,OACjB;AAAA,KACH;AAAA,IACA,QAAA,EAAU,CAAA,CAAE,KAAA,CAAM,CAAA,CAAE,QAAQ,CAAA;AAAA,IAC5B,eAAA,EAAiB,CAAA,CAAE,KAAA,CAAM,CAAA,CAAE,QAAQ;AAAA,GACpC,CAAA;AAAA,EACD,OAAA,EAAS,OAAO,EAAE,OAAA,EAAS,QAAO,KAAM;AACtC,IAAA,MAAM,MAAA,GAAS,QAAQ,SAAA,EAAU;AACjC,IAAA,MAAA,EAAQ,KAAK,qCAAA,EAAgC;AAAA,MAC3C,QAAQ,OAAA,CAAQ,MAAA;AAAA,MAChB,WAAW,OAAA,CAAQ;AAAA,KACpB,CAAA;AAED,IAAA,MAAM,OAAO,EAAC;AACd,IAAA,MAAM,WAAW,EAAC;AAClB,IAAA,MAAM,kBAAkB,EAAC;AAGzB,IAAA,IAAI,OAAA,CAAQ,MAAA,KAAW,SAAA,IAAa,OAAA,CAAQ,WAAW,KAAA,EAAO;AAC5D,MAAA,MAAA,EAAQ,KAAK,+CAAwC,CAAA;AACrD,MAAA,IAAA,CAAK,IAAA;AAAA,QACH,EAAE,IAAA,EAAM,YAAA,EAAc,KAAA,EAAO,IAAA,EAAM,OAAO,IAAA,EAAK;AAAA,QAC/C,EAAE,IAAA,EAAM,YAAA,EAAc,KAAA,EAAO,IAAA,EAAM,OAAO,IAAA,EAAK;AAAA,QAC/C,EAAE,IAAA,EAAM,YAAA,EAAc,KAAA,EAAO,IAAA,EAAM,OAAO,MAAA;AAAO,OACnD;AACA,MAAA,QAAA,CAAS,IAAA;AAAA,QACP,sCAAA;AAAA,QACA;AAAA,OACF;AACA,MAAA,eAAA,CAAgB,IAAA;AAAA,QACd,+CAAA;AAAA,QACA;AAAA,OACF;AAAA,IACF;AAEA,IAAA,IAAI,OAAA,CAAQ,MAAA,KAAW,aAAA,IAAiB,OAAA,CAAQ,WAAW,KAAA,EAAO;AAChE,MAAA,MAAA,EAAQ,KAAK,kDAA2C,CAAA;AACxD,MAAA,IAAA,CAAK,IAAA;AAAA,QACH,EAAE,IAAA,EAAM,YAAA,EAAc,KAAA,EAAO,EAAA,EAAI,OAAO,IAAA,EAAK;AAAA,QAC7C,EAAE,IAAA,EAAM,YAAA,EAAc,KAAA,EAAO,EAAA,EAAI,OAAO,IAAA,EAAK;AAAA,QAC7C,EAAE,IAAA,EAAM,YAAA,EAAc,KAAA,EAAO,EAAA,EAAI,OAAO,MAAA;AAAO,OACjD;AACA,MAAA,QAAA,CAAS,IAAA,CAAK,yBAAyB,kCAAkC,CAAA;AACzE,MAAA,eAAA,CAAgB,IAAA;AAAA,QACd,sDAAA;AAAA,QACA;AAAA,OACF;AAAA,IACF;AAEA,IAAA,IAAI,OAAA,CAAQ,MAAA,KAAW,aAAA,IAAiB,OAAA,CAAQ,WAAW,KAAA,EAAO;AAChE,MAAA,MAAA,EAAQ,KAAK,mDAA4C,CAAA;AACzD,MAAA,QAAA,CAAS,IAAA,CAAK,4BAA4B,iCAAiC,CAAA;AAC3E,MAAA,eAAA,CAAgB,IAAA;AAAA,QACd,wCAAA;AAAA,QACA;AAAA,OACF;AAAA,IACF;AAEA,IAAA,IACE,OAAA,CAAQ,MAAA,KAAW,YAAA,IACnB,OAAA,CAAQ,WAAW,KAAA,EACnB;AACA,MAAA,MAAA,EAAQ,KAAK,+CAA0C,CAAA;AACvD,MAAA,QAAA,CAAS,IAAA;AAAA,QACP,kCAAA;AAAA,QACA;AAAA,OACF;AACA,MAAA,eAAA,CAAgB,IAAA;AAAA,QACd,4CAAA;AAAA,QACA;AAAA,OACF;AAAA,IACF;AAEA,IAAA,MAAA,EAAQ,KAAK,6CAAwC,CAAA;AAErD,IAAA,OAAO;AAAA,MACL,QAAQ,OAAA,CAAQ,MAAA;AAAA,MAChB,IAAA;AAAA,MACA,QAAA;AAAA,MACA;AAAA,KACF;AAAA,EACF;AACF,CAAC;;;;"}