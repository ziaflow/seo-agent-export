{"version":3,"file":"token-WAEKDUVY.mjs","sources":["../../node_modules/@mastra/server/dist/token-WAEKDUVY.js"],"sourcesContent":["import { require_token_util } from './chunk-SIW6CYO3.js';\r\nimport { require_token_error } from './chunk-FZNS32WJ.js';\r\nimport { __commonJS } from './chunk-PR4QN5HX.js';\r\n\r\n// ../../node_modules/.pnpm/@vercel+oidc@3.0.1/node_modules/@vercel/oidc/dist/token.js\r\nvar require_token = __commonJS({\r\n  \"../../node_modules/.pnpm/@vercel+oidc@3.0.1/node_modules/@vercel/oidc/dist/token.js\"(exports, module) {\r\n    var __defProp = Object.defineProperty;\r\n    var __getOwnPropDesc = Object.getOwnPropertyDescriptor;\r\n    var __getOwnPropNames = Object.getOwnPropertyNames;\r\n    var __hasOwnProp = Object.prototype.hasOwnProperty;\r\n    var __export = (target, all) => {\r\n      for (var name in all)\r\n        __defProp(target, name, { get: all[name], enumerable: true });\r\n    };\r\n    var __copyProps = (to, from, except, desc) => {\r\n      if (from && typeof from === \"object\" || typeof from === \"function\") {\r\n        for (let key of __getOwnPropNames(from))\r\n          if (!__hasOwnProp.call(to, key) && key !== except)\r\n            __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\r\n      }\r\n      return to;\r\n    };\r\n    var __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\r\n    var token_exports = {};\r\n    __export(token_exports, {\r\n      refreshToken: () => refreshToken\r\n    });\r\n    module.exports = __toCommonJS(token_exports);\r\n    var import_token_error = require_token_error();\r\n    var import_token_util = require_token_util();\r\n    async function refreshToken() {\r\n      const { projectId, teamId } = (0, import_token_util.findProjectInfo)();\r\n      let maybeToken = (0, import_token_util.loadToken)(projectId);\r\n      if (!maybeToken || (0, import_token_util.isExpired)((0, import_token_util.getTokenPayload)(maybeToken.token))) {\r\n        const authToken = (0, import_token_util.getVercelCliToken)();\r\n        if (!authToken) {\r\n          throw new import_token_error.VercelOidcTokenError(\r\n            \"Failed to refresh OIDC token: login to vercel cli\"\r\n          );\r\n        }\r\n        if (!projectId) {\r\n          throw new import_token_error.VercelOidcTokenError(\r\n            \"Failed to refresh OIDC token: project id not found\"\r\n          );\r\n        }\r\n        maybeToken = await (0, import_token_util.getVercelOidcToken)(authToken, projectId, teamId);\r\n        if (!maybeToken) {\r\n          throw new import_token_error.VercelOidcTokenError(\"Failed to refresh OIDC token\");\r\n        }\r\n        (0, import_token_util.saveToken)(maybeToken, projectId);\r\n      }\r\n      process.env.VERCEL_OIDC_TOKEN = maybeToken.token;\r\n      return;\r\n    }\r\n  }\r\n});\r\nvar tokenWAEKDUVY = require_token();\r\n\r\nexport { tokenWAEKDUVY as default };\r\n//# sourceMappingURL=token-WAEKDUVY.js.map\r\n//# sourceMappingURL=token-WAEKDUVY.js.map"],"names":[],"mappings":"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","x_google_ignoreList":[0]}